<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>EIC Software: MaterialPlugins</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-155388685-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-155388685-3');
</script>
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><a href="https://eic.github.io/"><img
								alt="Logo" src="../../ion-collision-xparent-crop.png" height="100"/></a></td>
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								EIC Software
							</div> 
							<div id="projectbrief">
								Reference for 
								<a href="https://eic.github.io/">EIC</a> 
								<a href="https://github.com/eic/">simulation and reconstruction software on GitHub</a>
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d1/d81/group__MaterialPlugins.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MaterialPlugins</div>  </div>
<div class="ingroups"><a class="el" href="../../dd/dd3/group__Plugins.html">Plugins</a></div></div><!--header-->
<div class="contents">

<p>Map material onto the <a class="el" href="../../da/d7b/namespaceActs.html" title="Set the Geometry Context PLUGIN.">Acts</a> geometry.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for MaterialPlugins:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/d81/group__MaterialPlugins.svg" width="255" height="39"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<p>Map material onto the <a class="el" href="../../da/d7b/namespaceActs.html" title="Set the Geometry Context PLUGIN.">Acts</a> geometry. </p>
<p>The MaterialPlugins allow to map material from a detailed full detector geometry onto the simplfied <a class="el" href="../../da/d7b/namespaceActs.html" title="Set the Geometry Context PLUGIN.">Acts</a> geometry. The material is mapped onto layers of the tracking geometry which are marked to carry support material. The marking is done during the geometry building process. The material can be mapped onto either, the inner, the outer boundary surface or the central (representing) <a class="el" href="../../de/d7d/classActs_1_1Surface.html" title="Abstract Base Class for tracking surfaces.">Acts::Surface</a> of the <a class="el" href="../../da/d28/classActs_1_1Layer.html">Acts::Layer</a>. The <a class="el" href="../../dd/d14/classActs_1_1Material.html">Acts::Material</a> is described on a two dimensional grid for each layer (<a class="el" href="../../da/dc2/classActs_1_1BinnedSurfaceMaterial.html">Acts::BinnedSurfaceMaterial</a>). The user defines the granularity of the grid during the geometry building process. </p>
<dl class="section note"><dt>Note</dt><dd>The DD4hepPlugin offers the possiility to mark layers which should carry material and to determine the grid granularity, using the class <a class="el" href="../../d8/d8a/classActs_1_1ActsExtension.html" title="Extension of the DD4hep DetElement needed for translation into the Acts tracking geometry.">Acts::ActsExtension</a>.</dd></dl>
<p>Following the <a class="el" href="../../da/d7b/namespaceActs.html" title="Set the Geometry Context PLUGIN.">Acts</a> philosophy the material mapping is agnostic to any file format and software used to create or store the material maps. The material should be stored in instances of the class Acts::MaterialTrack. This material track record represents a track starting from a certain position, in a certain direction, containing all material along this track. The material along the material track record ist stored as a container of Acts::MaterialStep instances. Each material step contains the material and its thickness at a certain position.</p>
<p>The material mapping process can be split into two subprocesses:</p>
<ul>
<li>material assignment</li>
<li>material averaging</li>
</ul>
<p><b>Material Assignment</b> During the material assignment process the decision onto which layer each material step will be assigned is done. To assign a Acts::MaterialTrack the function Acts::MaterialMapping::mapMaterial() should be used. This function extrapolates through the tracking detector, with the start position and direction given by the material track record and collects all layers marked to carry material. Then it loops through all material steps of the material track record and assigns the material of each step to the closest layer :</p>
<div class="image">
<img src="../../MaterialAssignment.jpeg" alt="MaterialAssignment.jpeg"/>
<div class="caption">
Example of material assignment onto the inner boundary surface of the layers. The green points are assigned to the current inner layer, the red to the next inner layer.</div></div>
<p> <b>Material Averaging</b> During the material mapping the user can decide to average the material whenever he/she prefers by using the function Acts::MaterialMapping::averageLayerMaterial(). In the end when all material track records have been mapped one should use the function Acts::MaterialMapping::finalizeLayerMaterial() in order to finalize the process.</p>
<p>The full material mapping process should be done in the framework of the user.</p>
<p>Possible workflow:</p>
<ul>
<li>Create material map(s) of full detector geometry using Acts::MaterialTrack</li>
<li>Read in material map(s) and go through all collected material track records<ul>
<li>use Acts::MaterialMapping::mapMaterial() for each material track record</li>
</ul>
</li>
<li>Use Acts::MaterialMapping::averageLayerMaterial() - once per run</li>
<li>In the end of the process use Acts::MaterialMapping::finalizeLayerMaterial() which assigns the final material to the layers </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="footer">
		Built by <a href="mailto:jhuang@bnl.gov">Jin Huang</a></em>.
			updated: <em>Fri Jun 5 2020 18:43:43</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.2 
				with <a href="https://github.com/eic">EIC GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
